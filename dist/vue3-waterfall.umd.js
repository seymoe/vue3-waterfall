var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["vue3-waterfall"]=t(e.Vue)}(this,(function(e){"use strict";var t=e.defineComponent({name:"Vue3Waterfall",props:{width:Number,height:Number,imgWidth:Number,cols:Number,gap:{type:Number,default:20},footerHeight:{type:Number,default:80},option:{type:Object,default:{value:"value",label:"label"}},list:{type:Array,default:()=>[]}},setup(t){const o=e.reactive({containerWidth:t.width||0,colWidth:t.imgWidth||240,colCount:t.cols||0,beginIndex:0,heightArr:[],waterfallList:[]}),r=()=>{if(!t.width){const e=document.querySelector("#waterfallBox");e&&(o.containerWidth=e.offsetWidth)}if(t.cols?o.colWidth=Math.floor(o.containerWidth/t.cols):o.colCount=Math.floor(o.containerWidth/o.colWidth),0===o.beginIndex){o.waterfallList=[],o.heightArr=new Array(o.colCount);for(let e=0;e<o.heightArr.length;e++)o.heightArr[e]=0}l()},l=()=>{for(let e=o.beginIndex;e<t.list.length;e++){let r=new Image;r.src=t.list[e],r.onload=r.onerror=l=>{let n={};n.width=o.colWidth,n.height=o.colWidth/r.width*r.height+t.footerHeight,n.src=t.list[e],n.title="标题",n.info="详情说明：啦啦啦啦啦",o.waterfallList.push(n),i(n)}}o.beginIndex=o.waterfallList.length},i=e=>{const r=n();e.top=o.heightArr[r],e.left=r*(e.width+t.gap),o.heightArr[r]+=e.height},n=()=>{const e=Math.min.apply(null,o.heightArr);return o.heightArr.indexOf(e)},a=()=>{o.beginIndex=0,r()};return e.onMounted((()=>{window.addEventListener("resize",a),r()})),e.onUnmounted((()=>{window.removeEventListener("resize",a)})),__spreadValues(__spreadValues({},e.toRefs(o)),e.toRefs(t))}});const o=e.withScopeId("data-v-29976b43");e.pushScopeId("data-v-29976b43");const r={class:"vue3-waterfall",id:"waterfallBox"},l={class:"waterfall-item_footer"},i={class:"title"},n={class:"info"};e.popScopeId();const a=o(((t,o,a,s,d,p)=>(e.openBlock(),e.createBlock("div",r,[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(t.waterfallList,((o,r)=>(e.openBlock(),e.createBlock("div",{key:r,class:"waterfall-item",style:{top:o.top+"px",left:o.left+"px",width:o.width+"px",height:o.height+"px"}},[e.renderSlot(t.$slots,"default",{item:o},(()=>[e.createVNode("img",{src:o.src,alt:o.title},null,8,["src","alt"])]),!0),e.createVNode("div",l,[e.renderSlot(t.$slots,"footer",{item:o},(()=>[e.createVNode("p",i,e.toDisplayString(o.title),1),e.createVNode("p",n,e.toDisplayString(o.info),1)]),!0)])],4)))),128))]))));return t.render=a,t.__scopeId="data-v-29976b43",t}));
