var t=Object.defineProperty,e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(e,r,l)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[r]=l,o=(t,o)=>{for(var a in o||(o={}))r.call(o,a)&&i(t,a,o[a]);if(e)for(var a of e(o))l.call(o,a)&&i(t,a,o[a]);return t};import{defineComponent as a,reactive as n,onMounted as h,onUnmounted as s,toRefs as d,pushScopeId as c,popScopeId as f,openBlock as p,createBlock as u,Fragment as g,renderList as w,renderSlot as b,createVNode as m,toDisplayString as v,withScopeId as y}from"vue";var x=a({name:"Vue3Waterfall",props:{width:Number,height:Number,imgWidth:Number,cols:Number,gap:{type:Number,default:20},footerHeight:{type:Number,default:80},option:{type:Object,default:{value:"value",label:"label"}},list:{type:Array,default:()=>[]}},setup(t){const e=n({containerWidth:t.width||0,colWidth:t.imgWidth||240,colCount:t.cols||0,beginIndex:0,heightArr:[],waterfallList:[]}),r=()=>{if(!t.width){const t=document.querySelector("#waterfallBox");t&&(e.containerWidth=t.offsetWidth)}if(t.cols?e.colWidth=Math.floor(e.containerWidth/t.cols):e.colCount=Math.floor(e.containerWidth/e.colWidth),0===e.beginIndex){e.waterfallList=[],e.heightArr=new Array(e.colCount);for(let t=0;t<e.heightArr.length;t++)e.heightArr[t]=0}l()},l=()=>{for(let r=e.beginIndex;r<t.list.length;r++){let l=new Image;l.src=t.list[r],l.onload=l.onerror=o=>{let a={};a.width=e.colWidth,a.height=e.colWidth/l.width*l.height+t.footerHeight,a.src=t.list[r],a.title="标题",a.info="详情说明：啦啦啦啦啦",e.waterfallList.push(a),i(a)}}e.beginIndex=e.waterfallList.length},i=r=>{const l=a();r.top=e.heightArr[l],r.left=l*(r.width+t.gap),e.heightArr[l]+=r.height},a=()=>{const t=Math.min.apply(null,e.heightArr);return e.heightArr.indexOf(t)},c=()=>{e.beginIndex=0,r()};return h((()=>{window.addEventListener("resize",c),r()})),s((()=>{window.removeEventListener("resize",c)})),o(o({},d(e)),d(t))}});const W=y("data-v-29976b43");c("data-v-29976b43");const A={class:"vue3-waterfall",id:"waterfallBox"},I={class:"waterfall-item_footer"},O={class:"title"},L={class:"info"};f();const N=W(((t,e,r,l,i,o)=>(p(),u("div",A,[(p(!0),u(g,null,w(t.waterfallList,((e,r)=>(p(),u("div",{key:r,class:"waterfall-item",style:{top:e.top+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px"}},[b(t.$slots,"default",{item:e},(()=>[m("img",{src:e.src,alt:e.title},null,8,["src","alt"])]),!0),m("div",I,[b(t.$slots,"footer",{item:e},(()=>[m("p",O,v(e.title),1),m("p",L,v(e.info),1)]),!0)])],4)))),128))]))));x.render=N,x.__scopeId="data-v-29976b43";export default x;
